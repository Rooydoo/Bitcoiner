# CryptoTrader - æš—å·è³‡ç”£è‡ªå‹•å£²è²·ã‚·ã‚¹ãƒ†ãƒ 

[![Python 3.11+](https://img.shields.io/badge/python-3.11%2B%20|%203.12-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

å††å»ºã¦ï¼ˆJPYï¼‰ã§ã®æš—å·è³‡ç”£è‡ªå‹•å£²è²·ã‚·ã‚¹ãƒ†ãƒ ã€‚BTC/JPYãƒ»ETH/JPYã®å–å¼•ã«å¯¾å¿œã—ã€æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹ä¾¡æ ¼äºˆæ¸¬ã¨æ®µéšçš„ãªåˆ©ç›Šç¢ºå®šãƒ»ãƒªã‚¹ã‚¯ç®¡ç†æ©Ÿèƒ½ã‚’å®Ÿè£…ã€‚

## ğŸ“‹ ç›®æ¬¡

- [ç‰¹å¾´](#ç‰¹å¾´)
- [ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ](#ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ)
- [å¿…è¦è¦ä»¶](#å¿…è¦è¦ä»¶)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
- [è¨­å®š](#è¨­å®š)
- [ä½¿ã„æ–¹](#ä½¿ã„æ–¹)
- [ãƒªã‚¹ã‚¯ç®¡ç†](#ãƒªã‚¹ã‚¯ç®¡ç†)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)
- [é–‹ç™º](#é–‹ç™º)

## âœ¨ ç‰¹å¾´

### ğŸ“Š Phase 1: ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒ•ãƒ©
- **ãƒ‡ãƒ¥ã‚¢ãƒ«APIæ§‹æˆ**
  - **Binance API** - éå»ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆãƒ¢ãƒ‡ãƒ«å­¦ç¿’ç”¨ã€fetchOHLCVå¯¾å¿œï¼‰
  - **bitFlyer API** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ»å–å¼•å®Ÿè¡Œï¼ˆå††å»ºã¦ï¼‰
- **ã‚·ãƒ³ãƒœãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°** - BTC/JPY â†’ BTC/USDT è‡ªå‹•å¤‰æ›
- **SQLite ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** - 3DBæ§‹æˆï¼ˆä¾¡æ ¼ãƒ»å–å¼•ãƒ»MLãƒ¢ãƒ‡ãƒ«ï¼‰
- **ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™** - 20ç¨®é¡ä»¥ä¸Šã®æŒ‡æ¨™ã‚’è‡ªå‹•è¨ˆç®—
- **ã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼** - APSchedulerã«ã‚ˆã‚‹è‡ªå‹•å®Ÿè¡Œ

### ğŸ¤– Phase 2: MLäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«
- **ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°** - 107ç¨®é¡ã®ç‰¹å¾´é‡ã‚’ç”Ÿæˆ
- **HMMãƒ¢ãƒ‡ãƒ«** - å¸‚å ´çŠ¶æ…‹åˆ†é¡ï¼ˆBear/Range/Bullï¼‰
- **LightGBMãƒ¢ãƒ‡ãƒ«** - ä¾¡æ ¼æ–¹å‘äºˆæ¸¬ï¼ˆ3ã‚¯ãƒ©ã‚¹åˆ†é¡ï¼‰
- **ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ¢ãƒ‡ãƒ«** - HMM+LightGBMã§ä¿¡å·çµ±åˆ
- **ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ³** - æ‰‹æ•°æ–™ãƒ»ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸è€ƒæ…®

### ğŸ’¹ Phase 3: å–å¼•ã‚¨ãƒ³ã‚¸ãƒ³
- **æ³¨æ–‡å®Ÿè¡Œ** - æˆè¡Œ/æŒ‡å€¤æ³¨æ–‡ã€ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- **ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†** - ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆã€æç›Šè¨ˆç®—
- **ãƒªã‚¹ã‚¯ç®¡ç†**
  - ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹: -10%
  - ç¬¬1æ®µéšåˆ©ç¢º: +15%ã§50%æ±ºæ¸ˆ
  - ç¬¬2æ®µéšåˆ©ç¢º: +25%ã§å…¨æ±ºæ¸ˆ
  - æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³: -20%

### ğŸ“ˆ Phase 4: ãƒ¬ãƒãƒ¼ãƒˆãƒ»é€šçŸ¥
- **Telegram Boté€šçŸ¥** - å–å¼•é€šçŸ¥ã€æ—¥æ¬¡ã‚µãƒãƒªãƒ¼ã€ã‚¢ãƒ©ãƒ¼ãƒˆ
- **Telegram Botã‚³ãƒãƒ³ãƒ‰** - åŒæ–¹å‘åˆ¶å¾¡ï¼ˆ/status, /pause, /resumeç­‰ï¼‰
- **ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ** - æ—¥æ¬¡3å› + é€±æ¬¡ + æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆ
- **ç¨å‹™å‡¦ç†** - CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã€å¹´é–“æç›Šè¨ˆç®—

### ğŸš€ Phase 5: çµ±åˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤
- **ãƒ¡ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼** - å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆ
- **è¨­å®šç®¡ç†** - YAML + ç’°å¢ƒå¤‰æ•°
- **èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ** - ä»®æƒ³ç’°å¢ƒè‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- **çµ±åˆãƒ†ã‚¹ãƒˆ** - ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ

### ğŸ¤– Phase 6: AIæˆ¦ç•¥æœ€é©åŒ–ï¼ˆNew!ï¼‰
- **LLMæˆ¦ç•¥ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼** - Claude Sonnet 4.5ã«ã‚ˆã‚‹é«˜åº¦ãªåˆ†æ
- **è‡ªå‹•ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ææ¡ˆ** - æåˆ‡/åˆ©ç¢ºãƒ©ã‚¤ãƒ³ã€è³‡ç”£é…åˆ†ã®æœ€é©åŒ–
- **é€±æ¬¡ãƒ»æœˆæ¬¡ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ** - å‹ç‡ã€PFã€Sharpe Ratioç­‰
- **ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯** - APIéšœå®³æ™‚ã‚‚å®‰å…¨å‹•ä½œ

### ğŸ›¡ï¸ é«˜åº¦ãªãƒªã‚¹ã‚¯ç®¡ç†ï¼ˆNew!ï¼‰
- **éƒ¨åˆ†æ±ºæ¸ˆ** - +15%ã§50%æ±ºæ¸ˆã€+25%ã§å…¨æ±ºæ¸ˆï¼ˆMUSTæ©Ÿèƒ½ï¼‰
- **é€£ç¶šæå¤±åˆ¶é™** - 5é€£æ•—ã§è‡ªå‹•ä¸€æ™‚åœæ­¢
- **æœŸé–“åˆ¥æå¤±åˆ¶é™** - æ—¥æ¬¡5%, é€±æ¬¡10%, æœˆæ¬¡15%
- **ãƒã‚¸ã‚·ãƒ§ãƒ³æ•°åˆ¶é™** - æœ€å¤§1ãƒã‚¸ã‚·ãƒ§ãƒ³ï¼ˆç›¸é–¢ãƒªã‚¹ã‚¯ä½æ¸›ï¼‰
- **APIéšœå®³æ¤œçŸ¥** - 3é€£ç¶šã‚¨ãƒ©ãƒ¼ã§å®‰å…¨åœæ­¢
- **TelegramçµŒç”±åˆ¶å¾¡** - å¤–å‡ºå…ˆã‹ã‚‰ä¸€æ™‚åœæ­¢/å†é–‹å¯èƒ½

## ğŸ— ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
CryptoTrader/
â”œâ”€â”€ data/                   # ãƒ‡ãƒ¼ã‚¿åé›†ãƒ»å‡¦ç†
â”‚   â”œâ”€â”€ collector/         # Binance + bitFlyer API
â”‚   â”œâ”€â”€ processor/         # ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™
â”‚   â””â”€â”€ storage/           # SQLite DBç®¡ç†
â”œâ”€â”€ ml/                     # æ©Ÿæ¢°å­¦ç¿’
â”‚   â”œâ”€â”€ models/            # HMM, LightGBM, Ensemble
â”‚   â””â”€â”€ training/          # ç‰¹å¾´é‡ç”Ÿæˆã€ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ trading/                # å–å¼•ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ order_executor.py  # æ³¨æ–‡å®Ÿè¡Œ
â”‚   â”œâ”€â”€ position_manager.py # ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â””â”€â”€ risk_manager.py    # ãƒªã‚¹ã‚¯ç®¡ç†
â”œâ”€â”€ notification/           # Telegramé€šçŸ¥
â”œâ”€â”€ reporting/              # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
â”œâ”€â”€ utils/                  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ tests/                  # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ config/                 # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ main_trader.py          # ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
â””â”€â”€ start.sh                # èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

## ğŸ’» å¿…è¦è¦ä»¶

### ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢
- **CPU**: 2ã‚³ã‚¢ä»¥ä¸Š
- **RAM**: 8GBä»¥ä¸Š
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: 10GBä»¥ä¸Šã®ç©ºãå®¹é‡

### ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢
- **Python**: 3.11ä»¥ä¸Šï¼ˆ3.12å¯¾å¿œæ¸ˆã¿ï¼‰
- **OS**: Linux / macOS / Windowsï¼ˆWSLæ¨å¥¨ï¼‰
- **Git**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

### å–å¼•æ‰€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- **bitFlyer**ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
  - API Key / API Secret ã®å–å¾—
  - å–å¼•æ¨©é™ã®æœ‰åŠ¹åŒ–

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆæ¨å¥¨ï¼‰
- **Telegram Bot**: é€šçŸ¥æ©Ÿèƒ½
- **VPS**: Hostingerç­‰ï¼ˆ24æ™‚é–“ç¨¼åƒï¼‰

### ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«ã¤ã„ã¦

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ **ãƒ‡ãƒ¥ã‚¢ãƒ«APIæ§‹æˆ** ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ï¼š

| ç”¨é€” | API | ç†ç”± |
|------|-----|------|
| éå»ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ¢ãƒ‡ãƒ«å­¦ç¿’ï¼‰ | Binance | fetchOHLCV()å¯¾å¿œã€å¤§é‡ãƒ‡ãƒ¼ã‚¿å–å¾—å¯èƒ½ |
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ | bitFlyer | å††å»ºã¦å–å¼•æ‰€ |
| å–å¼•å®Ÿè¡Œ | bitFlyer | å††å»ºã¦æ³¨æ–‡åŸ·è¡Œ |

**ã‚·ãƒ³ãƒœãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆè‡ªå‹•å¤‰æ›ï¼‰:**
```
BTC/JPY â†’ BTC/USDTï¼ˆBinanceï¼‰
ETH/JPY â†’ ETH/USDTï¼ˆBinanceï¼‰
```

> **æ³¨:** bitFlyer APIã¯`fetchOHLCV()`éå¯¾å¿œã®ãŸã‚ã€éå»ãƒ‡ãƒ¼ã‚¿å–å¾—ã«ã¯Binance APIã‚’ä½¿ç”¨ã€‚Binance APIã‚­ãƒ¼ã¯ä¸è¦ï¼ˆå…¬é–‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä½¿ç”¨ï¼‰ã€‚

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/yourusername/Bitcoiner.git
cd Bitcoiner
```

### 2. ä»®æƒ³ç’°å¢ƒã®ä½œæˆã¨ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Pythonä»®æƒ³ç’°å¢ƒä½œæˆ
python3 -m venv venv

# ä»®æƒ³ç’°å¢ƒæœ‰åŠ¹åŒ–ï¼ˆLinux/macOSï¼‰
source venv/bin/activate

# ä»®æƒ³ç’°å¢ƒæœ‰åŠ¹åŒ–ï¼ˆWindowsï¼‰
venv\Scripts\activate

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install --upgrade pip
pip install -r requirements.txt
```

### 3. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ

```bash
mkdir -p database logs ml_models tax_reports
```

### 4. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
nano .env
```

```.env
# bitFlyer APIï¼ˆæœ¬ç•ªé‹ç”¨æ™‚ã«è¨­å®šï¼‰
BITFLYER_API_KEY=your_api_key_here
BITFLYER_API_SECRET=your_api_secret_here

# Telegram Botï¼ˆé€šçŸ¥æ©Ÿèƒ½ã‚’ä½¿ã†å ´åˆï¼‰
# ãƒœãƒƒãƒˆä½œæˆ: @BotFather ã§æ–°è¦Botä½œæˆ
# Chat IDå–å¾—: @userinfobot ã§Chat IDç¢ºèª
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here

# Anthropic APIï¼ˆLLMæˆ¦ç•¥ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ã‚’ä½¿ã†å ´åˆ - ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
# https://console.anthropic.com/ ã§APIã‚­ãƒ¼å–å¾—
ANTHROPIC_API_KEY=your_anthropic_api_key_here
```

**âš ï¸ é‡è¦:** æœ¬ç•ªé‹ç”¨æ™‚ã¯å¿…ãšä»¥ä¸‹ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š
- `BITFLYER_API_KEY` / `BITFLYER_API_SECRET` ï¼ˆå¿…é ˆï¼‰
- `TELEGRAM_BOT_TOKEN` / `TELEGRAM_CHAT_ID` ï¼ˆå¼·ãæ¨å¥¨ - ç·Šæ€¥é€šçŸ¥ç”¨ï¼‰
- `ANTHROPIC_API_KEY` ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ - LLMæˆ¦ç•¥åˆ†æã‚’ä½¿ã†å ´åˆï¼‰
```

**Telegram Botè¨­å®šæ‰‹é †:**
1. [@BotFather](https://t.me/BotFather) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. `/newbot` ã§Botä½œæˆ â†’ ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
3. [@userinfobot](https://t.me/userinfobot) ã§Chat IDç¢ºèª

### 5. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªï¼š

```bash
# ä»®æƒ³ç’°å¢ƒãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
source venv/bin/activate  # Linux/macOS
# ã¾ãŸã¯
venv\Scripts\activate  # Windows

# é‡è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç¢ºèª
pip list | grep -E "anthropic|python-telegram-bot|ccxt|lightgbm"
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:**
```
anthropic          0.40.0ä»¥ä¸Š
ccxt               4.5.0ä»¥ä¸Š
lightgbm           4.3.0ä»¥ä¸Š
python-telegram-bot 20.7
ta                 0.11.0
```

**ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ:**
```bash
pip install -r requirements.txt
```

### 6. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª

`config/config.yaml` ã‚’ç¢ºèªãƒ»å¿…è¦ã«å¿œã˜ã¦ç·¨é›†:

```yaml
trading:
  initial_capital: 200000      # åˆæœŸè³‡æœ¬ï¼ˆå††ï¼‰
  min_confidence: 0.6          # æœ€å°ã‚·ã‚°ãƒŠãƒ«ä¿¡é ¼åº¦
  trading_interval_minutes: 5  # å–å¼•ã‚µã‚¤ã‚¯ãƒ«é–“éš”

risk_management:
  stop_loss_pct: 10.0          # ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹
  take_profit_first: 15.0      # ç¬¬1æ®µéšåˆ©ç¢º
  take_profit_second: 25.0     # ç¬¬2æ®µéšåˆ©ç¢º
```

## ğŸ”§ è¨­å®š

### bitFlyer APIå–å¾—æ–¹æ³•

1. [bitFlyer](https://bitflyer.com/)ã«ãƒ­ã‚°ã‚¤ãƒ³
2. ã€ŒAPIã€â†’ã€Œæ–°ã—ã„APIã‚­ãƒ¼ã‚’è¿½åŠ ã€
3. æ¨©é™è¨­å®š:
   - è³‡ç”£æ®‹é«˜ã‚’å–å¾—: âœ“
   - æ–°è¦æ³¨æ–‡ã‚’å‡ºã™: âœ“
   - æ³¨æ–‡ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹: âœ“
4. APIã‚­ãƒ¼ãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦`.env`ã«è¨­å®š

### ãƒªã‚¹ã‚¯ç®¡ç†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|----------|---------|------|
| `stop_loss_pct` | 10.0% | ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ï¼ˆæåˆ‡ã‚Šï¼‰ |
| `take_profit_first` | +15.0% | ç¬¬1æ®µéšåˆ©ç¢ºï¼ˆ50%æ±ºæ¸ˆï¼‰ |
| `take_profit_second` | +25.0% | ç¬¬2æ®µéšåˆ©ç¢ºï¼ˆå…¨æ±ºæ¸ˆï¼‰ |
| `max_drawdown_pct` | 20.0% | æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³ |
| `max_position_size` | 0.95 | ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚ºä¸Šé™ |

## ğŸ“– ä½¿ã„æ–¹

### èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ¨å¥¨ï¼‰

```bash
./start.sh
```

ãƒ¢ãƒ¼ãƒ‰é¸æŠ:
1. **ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰** - APIã‚­ãƒ¼ãªã—ã€ãƒ¢ãƒƒã‚¯å‹•ä½œ
2. **æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰** - bitFlyer APIä½¿ç”¨
3. **ãƒ¢ãƒ‡ãƒ«å­¦ç¿’ã®ã¿** - HMM + LightGBMå­¦ç¿’
4. **Phase 5çµ±åˆãƒ†ã‚¹ãƒˆ** - å…¨æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

### æ‰‹å‹•èµ·å‹•

#### 1. ãƒ¢ãƒ‡ãƒ«å­¦ç¿’

```bash
# BTC/JPYãƒ¢ãƒ‡ãƒ«å­¦ç¿’
python ml/training/train_models.py --symbol BTC/JPY

# ETH/JPYãƒ¢ãƒ‡ãƒ«å­¦ç¿’
python ml/training/train_models.py --symbol ETH/JPY
```

#### 2. ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼ˆAPIã‚­ãƒ¼ãªã—ï¼‰

```bash
python main_trader.py --test --interval 1
```

#### 3. æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰

```bash
# .envã«APIã‚­ãƒ¼è¨­å®šæ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
python main_trader.py --interval 5
```

#### 4. ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œï¼ˆsystemdæ¨å¥¨ï¼‰

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‰ã˜ã¦ã‚‚ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¨¼åƒã•ã›ç¶šã‘ã‚‹ã«ã¯ã€systemdã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ï¼š

```bash
# ã‚µãƒ¼ãƒ“ã‚¹é–‹å§‹
sudo systemctl start cryptotrader

# è‡ªå‹•èµ·å‹•æœ‰åŠ¹åŒ–
sudo systemctl enable cryptotrader

# çŠ¶æ…‹ç¢ºèª
sudo systemctl status cryptotrader

# ãƒ­ã‚°ç¢ºèª
sudo journalctl -u cryptotrader -f
```

> **è©³ç´°è¨­å®š:** æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ã¯ `DEPLOYMENT.md` ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³12ã‚’å‚ç…§

### ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³

```bash
python main_trader.py --help

ã‚ªãƒ—ã‚·ãƒ§ãƒ³:
  --config PATH    è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: config/config.yamlï¼‰
  --test           ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼ˆAPIã‚­ãƒ¼ãªã—ï¼‰
  --interval N     å–å¼•ã‚µã‚¤ã‚¯ãƒ«é–“éš”ï¼ˆåˆ†ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 5ï¼‰
```

### Telegram Botã‚³ãƒãƒ³ãƒ‰ï¼ˆãƒªãƒ¢ãƒ¼ãƒˆåˆ¶å¾¡ï¼‰

ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒä¸­ã€Telegramã‚¢ãƒ—ãƒªã‹ã‚‰ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆ¶å¾¡ã§ãã¾ã™ï¼š

```
ğŸ“Š æƒ…å ±å–å¾—
/status          - ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ï¼ˆç¨¼åƒä¸­/åœæ­¢ã€æ®‹é«˜ã€ãƒã‚¸ã‚·ãƒ§ãƒ³ï¼‰
/positions       - ä¿æœ‰ãƒã‚¸ã‚·ãƒ§ãƒ³è©³ç´°
/config          - ç¾åœ¨ã®è¨­å®šè¡¨ç¤º

âš™ï¸ åˆ¶å¾¡
/pause           - å–å¼•ä¸€æ™‚åœæ­¢ï¼ˆæ–°è¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼åœæ­¢ï¼‰
/resume          - å–å¼•å†é–‹ï¼ˆé€£ç¶šæå¤±ã‚«ã‚¦ãƒ³ãƒˆãƒªã‚»ãƒƒãƒˆï¼‰

ğŸ”§ è¨­å®šå¤‰æ›´
/set_stop_loss 8.0   - æåˆ‡ãƒ©ã‚¤ãƒ³ã‚’8.0%ã«å¤‰æ›´
                       (config.yamlè‡ªå‹•æ›´æ–° + ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ)

â“ ãã®ä»–
/commands        - ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§ï¼ˆç°¡æ½”ç‰ˆï¼‰
/help            - è©³ç´°ãƒ˜ãƒ«ãƒ—
```

**ä½¿ç”¨ä¾‹:**
```
ã‚ãªãŸ: /status

Bot: ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹
     ğŸŸ¢ ç¨¼åƒä¸­
     â–¶ï¸ ã‚¢ã‚¯ãƒ†ã‚£ãƒ–
     ğŸ’° æ®‹é«˜: Â¥200,000
     ğŸ“ˆ ãƒã‚¸ã‚·ãƒ§ãƒ³: 1ä»¶
     â€¢ BTC/JPY LONG: +5.2%

ã‚ãªãŸ: /pause

Bot: â¸ï¸ å–å¼•ã‚’ä¸€æ™‚åœæ­¢ã—ã¾ã—ãŸ
     å†é–‹ã™ã‚‹ã«ã¯: /resume
```

**ğŸ’¡ ãƒ’ãƒ³ãƒˆ:** ãƒãƒ£ãƒƒãƒˆå…¥åŠ›æ¬„ã§ã€Œ/ã€ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ã‚³ãƒãƒ³ãƒ‰å€™è£œãŒè‡ªå‹•è¡¨ç¤ºã•ã‚Œã¾ã™

## âš ï¸ ãƒªã‚¹ã‚¯ç®¡ç†

### æ®µéšçš„åˆ©ç›Šç¢ºå®š

```
ã‚¨ãƒ³ãƒˆãƒªãƒ¼ä¾¡æ ¼: Â¥12,000,000

+15% (Â¥13,800,000) â†’ 50%æ±ºæ¸ˆï¼ˆç¬¬1æ®µéšåˆ©ç¢ºï¼‰
+25% (Â¥15,000,000) â†’ æ®‹ã‚Šå…¨æ±ºæ¸ˆï¼ˆç¬¬2æ®µéšåˆ©ç¢ºï¼‰

-10% (Â¥10,800,000) â†’ å…¨æ±ºæ¸ˆï¼ˆã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ï¼‰
```

### ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚ºè¨ˆç®—

```
ç·è³‡ç”£: Â¥200,000
BTCé…åˆ†: 60% â†’ Â¥120,000
ETHé…åˆ†: 40% â†’ Â¥80,000

æœ€å¤§ãƒã‚¸ã‚·ãƒ§ãƒ³: è³‡ç”£ã®95%ã¾ã§
```

### æ¨å¥¨è¨­å®š

- **åˆæœŸè³‡æœ¬**: æœ€ä½20ä¸‡å††ä»¥ä¸Š
- **å–å¼•ã‚µã‚¤ã‚¯ãƒ«**: 5åˆ†é–“éš”ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- **æœ€å°ä¿¡é ¼åº¦**: 60%ä»¥ä¸Šï¼ˆä½ã™ãã‚‹ã¨é »ç¹ã«å–å¼•ï¼‰
- **ç›£è¦–**: å®šæœŸçš„ã«ãƒ­ã‚°ãƒ»Telegramé€šçŸ¥ã‚’ç¢ºèª

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ãƒ‡ãƒ¼ã‚¿åé›†ã‚¨ãƒ©ãƒ¼

```
bitflyer fetchOHLCV() is not supported yet
```

**åŸå› **: bitFlyerã¯fetchOHLCV()æœªã‚µãƒãƒ¼ãƒˆï¼ˆéå»ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸å¯ï¼‰
**è§£æ±º**: éå»ãƒ‡ãƒ¼ã‚¿å–å¾—ã«ã¯Binance APIã‚’ä½¿ç”¨ï¼ˆè‡ªå‹•åˆ‡ã‚Šæ›¿ãˆæ¸ˆã¿ï¼‰
- ãƒ¢ãƒ‡ãƒ«å­¦ç¿’: Binance APIï¼ˆBTC/USDT, ETH/USDTï¼‰
- å–å¼•åŸ·è¡Œ: bitFlyer APIï¼ˆBTC/JPY, ETH/JPYï¼‰

#### 2. ãƒ¢ãƒ‡ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼

```
ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
```

**åŸå› **: ãƒ¢ãƒ‡ãƒ«æœªå­¦ç¿’
**è§£æ±º**: `./start.sh` â†’ 3) ãƒ¢ãƒ‡ãƒ«å­¦ç¿’ã®ã¿

#### 3. APIæ¥ç¶šã‚¨ãƒ©ãƒ¼

```
Authentication failed
```

**åŸå› **: APIã‚­ãƒ¼ã®è¨­å®šãƒŸã‚¹
**è§£æ±º**: `.env`ã®`BITFLYER_API_KEY`/`BITFLYER_API_SECRET`ã‚’ç¢ºèª

#### 4. Telegramé€šçŸ¥ãŒå±Šã‹ãªã„

```
Telegramé€šçŸ¥ãŒç„¡åŠ¹ã§ã™
```

**åŸå› **: Token/Chat IDæœªè¨­å®š
**è§£æ±º**: `.env`ã§`TELEGRAM_BOT_TOKEN`ã¨`TELEGRAM_CHAT_ID`ã‚’è¨­å®š

#### 5. Python 3.12ã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼

```
pip install ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
```

**åŸå› **: ä¸€éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒPython 3.12éå¯¾å¿œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
**è§£æ±º**: requirements.txtã¯3.12å¯¾å¿œæ¸ˆã¿ã€‚ä»¥ä¸‹ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªï¼š
```
numpy>=1.26.0     # 1.24.xã¯Python 3.12éå¯¾å¿œ
pandas>=2.1.0
ta==0.11.0        # pandas-taã®ä»£æ›¿ï¼ˆnumpy 2.xç«¶åˆå›é¿ï¼‰
ccxt>=4.5.0
```

### ãƒ­ã‚°ç¢ºèª

```bash
# ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°
tail -f logs/main_trader.log

# ãƒ†ã‚¹ãƒˆãƒ­ã‚°
tail -f logs/test_phase5.log
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª

```bash
# SQLiteã§DBç¢ºèª
sqlite3 database/trades.db "SELECT * FROM trades ORDER BY timestamp DESC LIMIT 10;"
```

## ğŸ”§ é–‹ç™º

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# Phase 5çµ±åˆãƒ†ã‚¹ãƒˆ
python tests/test_phase5_integration.py

# Phase 4ãƒ¬ãƒãƒ¼ãƒˆãƒ†ã‚¹ãƒˆ
python tests/test_phase4_integration.py

# Phase 3å–å¼•ã‚¨ãƒ³ã‚¸ãƒ³ãƒ†ã‚¹ãƒˆ
python tests/test_phase3_integration.py
```

### ã‚³ãƒ¼ãƒ‰å“è³ª

```bash
# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
black .

# ãƒªãƒ³ãƒˆ
flake8 .

# ã‚«ãƒãƒ¬ãƒƒã‚¸
pytest --cov=. tests/
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœï¼ˆPhase 2ï¼‰

```
æœŸé–“: 2å¹´åˆ†ã®ãƒ‡ãƒ¼ã‚¿
ç·ãƒªã‚¿ãƒ¼ãƒ³: +53.49%
å‹ç‡: 71.43%
æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³: -12.3%
```

### ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡

```
ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: ~150MBï¼ˆ8GBã®1.9%ï¼‰
CPUä½¿ç”¨ç‡: å¹³å‡5-10%ï¼ˆ2ã‚³ã‚¢ï¼‰
ãƒ‡ã‚£ã‚¹ã‚¯: ~500MBï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ + ãƒ­ã‚°ï¼‰
```

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯[LICENSE](LICENSE)ã‚’å‚ç…§

## âš¡ æ³¨æ„äº‹é …

1. **æŠ•è³‡ã¯è‡ªå·±è²¬ä»»**: æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯äºˆæ¸¬ã®æ­£ç¢ºæ€§ã‚’ä¿è¨¼ã—ã¾ã›ã‚“
2. **å°‘é¡ã‹ã‚‰é–‹å§‹**: åˆã‚ã¯å°‘é¡è³‡æœ¬ã§ãƒ†ã‚¹ãƒˆé‹ç”¨ã‚’æ¨å¥¨
3. **å®šæœŸç›£è¦–**: Telegramé€šçŸ¥ãƒ»ãƒ­ã‚°ã‚’å®šæœŸçš„ã«ç¢ºèª
4. **APIåˆ¶é™**: bitFlyerã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆ0.5ç§’é–“éš”ï¼‰ã«æ³¨æ„
5. **ç¨å‹™å‡¦ç†**: å¹´é–“æç›Šã®è¨ˆç®—ãƒ»ç¢ºå®šç”³å‘Šã¯å„è‡ªã§å®Ÿæ–½

## ğŸ¤ ã‚µãƒãƒ¼ãƒˆ

- **Issues**: [GitHub Issues](https://github.com/yourusername/Bitcoiner/issues)
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [Wiki](https://github.com/yourusername/Bitcoiner/wiki)

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [bitFlyer API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://lightning.bitflyer.com/docs)
- [Binance API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://binance-docs.github.io/apidocs/)
- [ccxt ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.ccxt.com/)
- [LightGBM ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://lightgbm.readthedocs.io/)
- [hmmlearn ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://hmmlearn.readthedocs.io/)

---

**å…è²¬äº‹é …**: ã“ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¯æ•™è‚²ç›®çš„ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚æš—å·è³‡ç”£å–å¼•ã«ã¯å¤§ããªãƒªã‚¹ã‚¯ãŒä¼´ã„ã¾ã™ã€‚æå¤±ã®å¯èƒ½æ€§ã‚’ç†è§£ã—ãŸä¸Šã§ã€è‡ªå·±è²¬ä»»ã§ã”ä½¿ç”¨ãã ã•ã„ã€‚
