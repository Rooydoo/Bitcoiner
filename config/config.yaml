# CryptoTrader 設定ファイル

# 取引所設定
exchange:
  name: bitflyer

# 取引対象通貨（円建て）
trading_pairs:
  - symbol: BTC/JPY
    allocation: 0.6  # 60%
  - symbol: ETH/JPY
    allocation: 0.4  # 40%

# リスク管理パラメータ
risk_management:
  max_position_size: 0.60       # ポジションサイズ上限（資産の60%）
  stop_loss_pct: 10.0           # ストップロス（10%損失で強制決済）
  max_drawdown_pct: 20.0        # 最大ドローダウン（20%）
  profit_taking_enabled: true   # 段階的利益確定を有効化
  take_profit_first: 15.0       # 第1段階利益確定 +15%で50%決済
  take_profit_second: 25.0      # 第2段階利益確定 +25%で全決済
  max_daily_loss_pct: 5.0       # 日次最大損失
  max_weekly_loss_pct: 10.0     # 週次最大損失
  max_monthly_loss_pct: 15.0    # 月次最大損失
  max_positions: 1              # 最大同時保有数（相関リスク低減のため1に変更）
  consecutive_loss_limit: 5     # 連続損失制限

# ML設定
machine_learning:
  initial_training_days: 730   # 2年分
  retrain_interval_days: 7     # 週次再学習
  lightgbm:
    num_threads: 2
    max_depth: 8
    num_leaves: 31

# レポート設定
reporting:
  morning_report_time: "07:00"
  noon_report_time: "13:00"
  evening_report_time: "22:00"
  weekly_report_day: 0        # 週次レポート曜日（0=月曜, 6=日曜）
  weekly_report_time: "22:00"  # 週次レポート時刻
  monthly_report_day: -1       # 月次レポート日（-1=月末）
  monthly_report_time: "22:00" # 月次レポート時刻

# 戦略アドバイザー設定
strategy_advisor:
  use_llm: true                         # LLM（Claude Sonnet）を使用
  model: "claude-sonnet-4-5-20250929"   # 使用モデル
  fallback_to_rule_based: true          # LLM失敗時にルールベースにフォールバック
  
# 取引設定
trading:
  initial_capital: 200000      # 初期資本（円）
  min_confidence: 0.6          # 最小シグナル信頼度（60%以上でエントリー）
  trading_interval_minutes: 5  # 取引サイクル間隔（分）

# レバレッジ設定
leverage:
  enabled: false               # レバレッジ取引を有効化（デフォルト: 無効 = 現物取引）
  max_leverage: 2.0            # 最大レバレッジ倍率（bitFlyer FXは最大2倍）
  fx_symbol: FX_BTC_JPY        # FX取引ペア（レバレッジ有効時に使用）
  margin_call_threshold: 0.8   # 証拠金維持率警告しきい値（80%）
  liquidation_threshold: 0.5   # 強制ロスカットしきい値（50%）
  allow_short: false           # ショートポジション許可（レバレッジ有効時のみ有効）

# 戦略配分設定
strategy_allocation:
  crypto_ratio: 0.50           # 総資金のうちコイン投資に使う割合（50%）
  trend_ratio: 0.50            # コイン資金のうちトレンド戦略に使う割合（50%）
  cointegration_ratio: 0.50    # コイン資金のうち共和分戦略に使う割合（50%）

# ペアトレーディング設定
pair_trading:
  z_score_entry: 2.0           # エントリーz-scoreしきい値
  z_score_exit: 0.5            # エグジットz-scoreしきい値
  z_score_stop_loss: 4.0       # ストップロスz-scoreしきい値
  max_pairs: 3                 # 最大ペア数
  position_size_pct: 0.1       # ポジションサイズ（資金の10%）
  lookback_period: 252         # ルックバック期間（日）
  rebalance_interval: 24       # リバランス間隔（時間）
  min_half_life: 5.0           # 最小半減期（日）
  max_half_life: 60.0          # 最大半減期（日）
  take_profit_pct: 0.03        # 利益確定（3%）
  trailing_stop_pct: 0.015     # トレーリングストップ（1.5%）
  min_profit_pct: 0.005        # 最小利益確保（0.5%）

# Telegram通知設定（.envで設定推奨）
telegram:
  enabled: true                # 通知有効化（APIキー設定時にtrue）
  bot_token: null              # Bot Token（.env推奨）
  chat_id: null                # Chat ID（.env推奨）

# Streamlit UI設定
ui:
  port: 8501
  host: "0.0.0.0"
  enable_basic_auth: true
